[
  {
    "objectID": "resume/index.html",
    "href": "resume/index.html",
    "title": "Mathatistics",
    "section": "",
    "text": "Raju Rimal\n\n\nStatistician/ Data scientist\n\n\n\n\n\nPassionate about data analysis and visualisations with strong technical and interpersonal skills for working in a team. Searching career in the intersection of statistics, web and programming.\n\n\n\n\nraju.rimal@medisin.uio.no rimalraju@hotmail.com\n\n\n\nhttps://mathatistics.com\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDriving licence class B\n\n\n\nDownload PDF\n\n\n\n\n\n\nExperiencesEducationSkillsLanguage, Interests & Hobbies\n\n\n\nResearch\n\n\nPostdoctoral Fellow, University of Oslo\n\n\nFaculty of Medicine, Department of Biostatistics\n\n\nOslo, Norway\n\n\nNov 2020–Now\n\n\nAnalyzing the trend of melanoma incidence and survival by tumour thickness in Norway overall and within different prognostic factors such as sex, age, anatomic site, and melanoma subtypes.\n\n\n\n\n\nPh.D. Candidate, Norwegian University of Life Sciences\n\n\nFaculty of Chem., Biotech. and Food Science,\n\n\nÅs, Norway\n\n\nAug. 2015–Oct. 2019\n\n\nDeveloping a versatile tool for simulating multi-response data from a linear model.\n\n\n\n\n\nConsulting & Advising\n\n\nSenior Consultant, Norwegian University of Life Sciences\n\n\nCenral Adminstration,\n\n\nÅs, Norway\n\n\nNov. 2019–May. 2020\n\n\nMapping the research works of NMBU to the SDG goals of UN is the primary objective of this project. Creating web-application from scratch and analysing & visualizing the collected data has been an exciting experience.\n\n\n\n\n\nConsultant, Norwegian University of Life Sciences\n\n\nLearning Center,\n\n\nÅs, Norway\n\n\nNov. 2016–Mar. 2018\n\n\nProviding statistical advice and tips about data analysis and preparation to the bachelors, masters and other PhD students was both exciting and challenging job where I encountered problems from many disciplines such as animal sciences, plant sciences and econometrics.\n\n\n\n\n\n\n\n\nTeaching\n\n\nNorwegian University of Life Sciences\nÅs, Norway\n\nTheoretical Statistics II\nSpring 2020\nPlanning and perparation of the complete course,\nprepare exercises, assignments and examination.\n\n\n\nApplied Methods in Statistics\nAutumn 2018\nInvolved in lecturing the part of the course including\nclassification and descrimination.\n\n\n\nDesign of Experiment and Analysis of Variance\nAugust 2017\nInvolved in lecturing the part of the course including\nclassification and descrimination.\n\n\n\n\n\n\n\nTeaching Assistant\n\n\nNorwegian University of Life Sciences\nÅs, Norway\n\nApplied Methods in Statistics\nAutumn of 2016, 2017, and 2018\n\n\n\nRegression Analysis\nJanuary of 2014, 2016, and 2017\n\n\n\nDesign of Experiment and Analysis of Variance\nAugust of 2013, 2015, 2016, and 2017\n\n\nWorking closely with students and preparing exercises for the course \nhelped me not only to understand and solve students’ problems but also \ngave me ideas on how to construct lectures, exercises and other activities \nfor future courses. The experience has also helped me to clearly \nunderstand many basic statistical concepts.\n\n\n\n\n\n\nIT Support\n\n\nElection Commission Nepal\nAug 2011–July 2012\n\n\n\nPostal Service Department, Nepal\nMar 2005–Aug 2011\n\n\n\n\n\n\n\nDissertations and Publications\n\n\n\n\nThesis\n\n\nRimal, Raju. Exploration of Multi-Response Multivariate Methods PhD thesis. Norwegian University of Life Sciences, Ås, 2019.\n\nhttps://therimalaya.github.io/Thesis/Thesis.pdf\n\n\n\nRimal, Raju. Evaluation of models for predicting the average monthly Euro versus Norwegian krone exchange rate from financial and commodity information. MS thesis. Norwegian University of Life Sciences, Ås, 2014.\n\nhttps://doi.org/10.13140/rg.2.1.1145.4886\n\n\n\nPapers\n\n\nRimal, Raju, Almøy Trygve, and Sæbø Solve. A tool for simulating multi-response linear model data. Chemometrics and Intelligent Laboratory Systems 176 (2018): 1-10.\n\nhttps://doi.org/10.1016/j.chemolab.2018.02.009\n\n\n\nHelland, Inge S., Sæbø, solve, Almøy, Trygve and Rimal, Raju, 2018. Model and estimators for partial least squares regression. Journal of Chemometrics, 32(9), p.e3044.\n\nhttps://doi.org/10.1002/cem.3044\n\n\n\nRimal, R., Almøy, T., & Sæbø, S. (2019). Comparison of multi-response prediction methods. Chemometrics and Intelligent Laboratory Systems, 190, 10-21.\n\nhttps://doi.org/10.1016/j.chemolab.2019.05.004\n\n\n\nRimal, Raju, Almøy, Trygve, and Sæbø Solve. 2019. Comparison of multi-response estimation methods Chemometrics and Intelligent Laboratory Systems 205 (2020) 104093\n\nhttps://doi.org/10.1016/j.chemolab.2020.104093\n\n\n\n\n\nConference Participation\n\n\nTrends in melanoma tumour thickness in Norway, 1983–2019\n\n\nANCR Symposium, 2022\n\n\nTórshavn, Faroe Islands, Poster presentation\n\n\n\n\nLong-term Trend on Tumour Thickness of Melanoma in Norway\n\n\nNOFE Conference 2021\n\n\nBergen, Norway, Presentation\n\n\n\n\nLong-term trend in melanoma tumour thickness in Norway\n\n\nTenth World Congress of Melanoma in Conjunction with 17th EADO Congress\n\n\nVirtual (Online), Poster presentation\n\n\n\n\nSimrel-M: Simulation tool for multi-response linear model data\n\n\nThe 26th Nordic Conference in Mathematical Statistics (NordStat 2016)\n\n\nCopenhagen, Denmark, Poster presentation\n\n\n\n\nSimrel-M: A simulation tool and its application\n\n\nThe 19th national meeting of statistics (Norske Statistikermøtet)\n\n\nFredrikstad, Norway, Presentation\n\n\n\n\nA versatile tool for simulating linear model data\n\n\nUseR! 2018 Conference\n\n\nBrisbane, Australia, Presentation\n\n\n\n\nA comparison of multi-response prediction methods\n\n\nScandinavian Symposium on Chemometrics (SSC16) Conference\n\n\nOslo, Norway, Presentation\n\n\n\n\nMultimatrix Extension of Partial Least Square\n\n\nThe first annual conference of NORBIS\n\n\nRosendal Fjordhotel, Norway, Poster presentation\n\n\n\n\n\nAcademic Qualifications\n\n\nDoctor of Philosophy in Applied Statistics\n\n\nNorwegian University of Life Sciences\n\n\nÅs, Norway\n\n\n2015–2019\n\n\n\n\n\n\nMasters in Bioinformatics and Applied Statistics\n\n\nNorwegian University of Life Sciences\n\n\nÅs, Norway\n\n\n2012–2015\n\n\n\n\n\n\nMasters in Statistics\n\n\nTribhuwan University, Central Department of Statistics\n\n\nKathmandu, Nepal\n\n\n2007–2009\n\n\n\n\n\n\nBachelors in Physics and Statistics\n\n\nTribhuwan University, Tri-candra Campus\n\n\nKathmandu, Nepal\n\n\n2003–2007\n\n\n\n\n\n\n\n\nIT skills\n\n\n\nAdvanced user of R and comfortable with Matlab and Python in most situations.\n\n\n\n\n\n\n\n\n\n\nadvanced\n\nR, Python, LaTeX, Knitr, Rmarkdown, Web Technologies, Microsoft Office, Stata\n\n\n\ncomfortable\n\nGit, JavaScript, Minitab, Matlab, Docker, SQL, Bash, Linux, D3, Graphics Design\n\n\n\nelementary\n\nJulia, SPSS, SVG\n\n\n\n\n\n\n\n\n\nData cleaning and wrangling\nInteractive shiny application with R\nReproducible workflow\nVersion control and testing\nData visualization\nWeb development and deployment\n\n\n\n\n\n\n\n\n\n\nScientific skills\n\n\n\n\nData cleaning and wrangling\nInteractive shiny application with R\nReproducible workflow\nVersion control and testing\nData visualization\nWeb development and deployment\n\n\n\n\n\n\n\nInterpersonal skills\n\n\n\n\nData cleaning and wrangling\nInteractive shiny application with R\nReproducible workflow\nVersion control and testing\nData visualization\nWeb development and deployment\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n    \n    \n      \n      Reading\n      Writing\n      Speaking\n      Listening\n    \n  \n  \n    Nepali\nNative\nNative\nNative\nNative\n    English\nExcellent\nExcellent\nExcellent\nExcellent\n    Hindi\nVery Good\nGood\nGood\nExcellent\n    Norwegian\nNovice (A2)\nNovice (A2)\nNovice (A2)\nNovice (A2)\n  \n  \n  \n\n\n\n\n\nI like hiking, cycling, and photography. In my free time I also play lego and make crafts together with my son.\nI like programming and like to explore new programming language"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Raju Rimal",
    "section": "",
    "text": "Hi,\n\n\nI am a postdoctoral fellow at University of Oslo working on analyzing melanoma incidence and survival trend in Norway. My research interest lies in the intersection of statistics, data visualization, web and programming.\nI live in Drammen, a beautiful city in Norway, with my wife and a son. I spend my personal time mostly cycling, hiking and taking pictures. I also like listining music and sometimes binge watching movies & serial."
  },
  {
    "objectID": "blog.html",
    "href": "blog.html",
    "title": "Blog",
    "section": "",
    "text": "Melanoma Incidence in Nordic Countries\n\n\nWith special focus on Norway\n\n\n\n\nJune 20, 2023\n\n\nRaju Rimal\n\n\n7 min\n\n\n\n\n\n\n\n\nAge Adjusted Rates in Epidemiology\n\n\n\n\nDecember 2, 2022\n\n\nRaju Rimal\n\n\n8 min\n\n\n\n\n\n\n\n\nConvert list of array/matrix into an array in R\n\n\n\n\nMarch 18, 2022\n\n\ntherimalaya\n\n\n0 min\n\n\n\n\n\n\n\n\nHow ANOVA analyze the variance\n\n\n\n\nMarch 29, 2021\n\n\ntherimalaya\n\n\n5 min\n\n\n\n\n\n\n\n\nInterpreting Biplot\n\n\n\n\nMarch 18, 2017\n\n\ntherimalaya\n\n\n1 min\n\n\n\n\n\n\n\n\nModel assessment and variable selection\n\n\n\n\nMarch 5, 2017\n\n\ntherimalaya\n\n\n5 min\n\n\n\n\n\n\n\n\nCreate LaTeX, HTML and Markdown tables in R\n\n\n\n\nMarch 1, 2017\n\n\nRaju Rimal\n\n\n0 min\n\n\n\n\n\n\n\n\nUsing Data from different Packages\n\n\n\n\nMarch 1, 2017\n\n\nJunali Chhetri\n\n\n0 min\n\n\n\n\n\n\n\n\nBasic Scatter Plot and linear fitted line\n\n\n\n\nMarch 1, 2017\n\n\ntherimalaya\n\n\n3 min\n\n\n\n\n\n\n\n\nLaTeX autocompletion in RStudio\n\n\n\n\nFebruary 25, 2016\n\n\ntherimalaya\n\n\n1 min\n\n\n\n\n\n\n\n\nScatter plot with multiple group\n\n\n\n\nJanuary 12, 2016\n\n\nRaju Rimal\n\n\n3 min\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html",
    "title": "LaTeX autocompletion in RStudio",
    "section": "",
    "text": "When I was working on my Masters thesis, I needed the latex autocompletion feature in Rsudio, but could not find it anywhere. There is no option to create custom snippet either. But recently I found some basic and necessary auto-completion for latex is available in RStudio. Following are some of the these you want to use, but remember to press Shift + Tab for autocomplete. Further this will only work on sweave or knitr file only, which is pretty obvious. But we can always create snippets for rmarkdown documents."
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#section",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#section",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Section",
    "text": "Section\n\nkeyword: sec\n\n\\section{section name}\n\\label{sec:section name}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#part",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#part",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Part",
    "text": "Part\n\nkeyword: part\n\n\\part{part name} % (fold)\n\\label{prt:part name}\n\n% part part name (end)"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#chapter",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#chapter",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Chapter",
    "text": "Chapter\n\nkeyword: chap\n\n\\chapter{chapter name}\n\\label{cha:chapter name}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#equation",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#equation",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Equation",
    "text": "Equation\n\nkeyword: eq\n\n\\begin{equation}\n  \n\\end{equation}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#figure",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#figure",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Figure",
    "text": "Figure\n\nkeyword: fig\n\n\\begin{figure}\n\\begin{center}\n    \\includegraphics[scale=]{Figures/}\n\\end{center}\n\\caption{}\n\\label{fig:}\n\\end{figure}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#tabular",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#tabular",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Tabular",
    "text": "Tabular\n\nkeyword: tab\n\n\\begin{tabular}{c}\n\n\\end{tabular}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#matrix",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#matrix",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Matrix",
    "text": "Matrix\n\nkeyword: mat\n\n\\begin{p/b/v/V/B/smallmatrix}\n  \n\\end{p/b/v/V/B/smallmatrix}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#description-list",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#description-list",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Description List",
    "text": "Description List\n\nkeyword: desc\n\n\\begin{description}\n  \\item[] \n\\end{description}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#enumerate-list",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#enumerate-list",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Enumerate List",
    "text": "Enumerate List\n\nkeyword: enum\n\n\\begin{enumerate}\n  \\item \n\\end{enumerate}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#general-environment",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#general-environment",
    "title": "LaTeX autocompletion in RStudio",
    "section": "General Environment",
    "text": "General Environment\n\nkeyword: begin\n\n\\begin{env}\n  \n\\end{env}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#figure-reference",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#figure-reference",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Figure Reference",
    "text": "Figure Reference\n\nkeyword: figure\n\nFigure~\\ref{fig:}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#table-reference",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#table-reference",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Table Reference",
    "text": "Table Reference\n\nkeyword: table\n\nTable~\\ref{tab:}"
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#citation",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#citation",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Citation",
    "text": "Citation\n\nkeyword: cite\n\n\\cite[]{}\nApart from these basic formatting options such as bf, sc, it and tt will also work."
  },
  {
    "objectID": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#update",
    "href": "blog/posts/2016-02-25-latex-autocompletion-in-rstudio/index.html#update",
    "title": "LaTeX autocompletion in RStudio",
    "section": "Update:",
    "text": "Update:\nIf you install daily-update of Rstudio, you will get TeX snippets support for both TeX and Rnw files. This has opened all the doors for features discussed here."
  },
  {
    "objectID": "blog/posts/nordic-melanoma/index.html",
    "href": "blog/posts/nordic-melanoma/index.html",
    "title": "Melanoma Incidence in Nordic Countries",
    "section": "",
    "text": "Cutaneous melanoma (CM) is the most aggressive and lethal form of skin cancer. Melanoma can be cured if caught and treated early but if left untreated, it may spread to other parts and can be fatal. In the recent years, melanoma has increased dramatically in fair skinned population worldwide including Nordic countries like Norway, Denmark, and Sweden. Norway is ranked fifth in incidence and third in mortality worldwide. This increase can be an effect of increased awareness in general public and health care provider.\nThis article explores melanoma incidence and mortality in nordic countries by sex and their trend over 40-years period from 1980–2020. Further, I try to step through the analysis process from data collection to create plots and tables."
  },
  {
    "objectID": "blog/posts/nordic-melanoma/index.html#data-preparation",
    "href": "blog/posts/nordic-melanoma/index.html#data-preparation",
    "title": "Melanoma Incidence in Nordic Countries",
    "section": "Data Preparation",
    "text": "Data Preparation\nData on melanoma were obtained from NORDCAN Engholm et al. (2010), Association of the Nordic Cancer Registries, IARC. Using NORDCAN 2.0 API1 crude and age-adjusted rates were downloaded as JSON and converted to tabular data for further analysis. R(R Core Team 2020) software was used for data gathering, cleanup, analysis, and plotting.\nThe API endpoint has four placeholder type, sex, country, and cancer following design was used to create individual endpoint. These individual url are used to download the JSON file as list in R.\n\nData APISample JSONData downloadData Preparation\n\n\n\n\nCode for preparing download URL\ndesign_map <- list(\n  sex = c(Male = 1, Female = 2),\n  type = c(Incidence = 0, Mortality = 1),\n  cancer = c(Melanoma = 290),\n  country = c(\n    Denmark = 208, Finland = 246, Iceland = 352,\n    Norway = 578, Sweden = 752\n  )\n)\nlabel_values <- function(data, label_map, var) {\n  label_vec <- label_map[[var]]\n  label <- `names<-`(names(label_vec), label_vec)\n  data[[var]] <- data[, label[as.character(get(var))]]\n  return(data)\n}\n\ndesign <- CJ(\n  sex = 1:2,\n  type = 0:1,\n  cancer = 290,\n  country = c(208, 246, 352, 578, 752)\n)\ndesign[, url := glue::glue_data(.SD, \n  \"https://gco.iarc.fr/gateway_prod/api/nordcan/v2/92/data/population/{type}/{sex}/({country})/({cancer})/?ages_group=5_17&year_start=1980&year_end=2020&year_grouped=0\"\n)]\ndesign <- design %>% \n  label_values(design_map, \"sex\") %>% \n  label_values(design_map, \"type\") %>% \n  label_values(design_map, \"cancer\") %>% \n  label_values(design_map, \"country\")\n\n\n\nAPI URL:\n\nhttps://gco.iarc.fr/gateway_prod/api/nordcan/v2/92/data/population/{type}/{sex}/({country})/({cancer})/?ages_group=5_17&year_start=1980&year_end=2020&year_grouped=0\n\n\nReplacing the placeholders type (Incidence: 0, Mortality: 1), sex (Male: 1, Female: 2), country (Denmark: 208, Finland: 246, Iceland: 352, Norway: 578, and Sweden: 752), and cancer (Melanoma: 290) prepare the data API.\n\n\n\n\nCode\njson_data = await FileAttachment(\"Data/nordcan.json\").json()\njson_data[0]\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode for data download\nif (!file.exists(\"Data/nordcan-json.Rds\")) {\n  design[, data := map(url, ~read_json(.x) %>% pluck(\"dataset\"))]\n  saveRDS(design, file = \"Data/nordcan-json.Rds\")\n} else {\n  design <- readRDS(\"Data/nordcan-json.Rds\")\n}\ndesign[, .(sex, type, country, data)]\n\n\n       sex      type country       data\n 1:   Male Incidence Denmark <list[41]>\n 2:   Male Incidence Finland <list[41]>\n 3:   Male Incidence Iceland <list[41]>\n 4:   Male Incidence  Norway <list[41]>\n 5:   Male Incidence  Sweden <list[41]>\n 6:   Male Mortality Denmark <list[41]>\n 7:   Male Mortality Finland <list[41]>\n 8:   Male Mortality Iceland <list[41]>\n 9:   Male Mortality  Norway <list[41]>\n10:   Male Mortality  Sweden <list[41]>\n11: Female Incidence Denmark <list[41]>\n12: Female Incidence Finland <list[41]>\n13: Female Incidence Iceland <list[41]>\n14: Female Incidence  Norway <list[41]>\n15: Female Incidence  Sweden <list[41]>\n16: Female Mortality Denmark <list[41]>\n17: Female Mortality Finland <list[41]>\n18: Female Mortality Iceland <list[41]>\n19: Female Mortality  Norway <list[41]>\n20: Female Mortality  Sweden <list[41]>\n\n\n\n\n\n\nRate data frame\nrate_df <- design[, map_df(data, function(dta) {\n  out <- data.table(\n    year = map_int(dta, \"year\"),\n    asr_w = map_dbl(dta, \"asr\"),\n    asr_e = map_dbl(dta, \"asr_e\"),\n    asr_n = map_dbl(dta, \"asr_n\"),\n    crude_rate = map_dbl(dta, \"crude_rate\"),\n    count = map_dbl(dta, \"total\"),\n    population = map_dbl(dta, \"total_pop\"),\n    cum_risk = map(dta, \"cum_risk\") %>% \n      unlist()\n  )\n  if (\"cum_risk\" %in% names(out)) {\n    out[, cum_risk := as.numeric(cum_risk)]\n  }\n  return(out)\n}), by = .(sex, type, country)]\n\n\n\n\nClasses 'data.table' and 'data.frame':  820 obs. of  10 variables:\n $ sex       : chr  \"Male\" \"Male\" \"Male\" \"Male\" ...\n $ type      : chr  \"Incidence\" \"Incidence\" \"Incidence\" \"Incidence\" ...\n $ country   : chr  \"Denmark\" \"Denmark\" \"Denmark\" \"Denmark\" ...\n $ year      : int  1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 ...\n $ asr_w     : num  11.9 10.9 12.2 13.4 13.8 ...\n $ asr_e     : num  12.7 12.1 13.1 14.5 15.3 ...\n $ asr_n     : num  13.5 13.1 14.1 15.2 16 ...\n $ crude_rate: num  12.4 12 13.1 14.3 14.8 ...\n $ count     : num  196 191 210 230 239 234 269 283 291 306 ...\n $ population: num  1585436 1593815 1601416 1609960 1618038 ...\n - attr(*, \".internal.selfref\")=<externalptr> \n\n\n\n\nRate by age\nrate_by_age <- design[, map_df(data, function(dta) {\n  year <- map_int(dta, \"year\")\n  count_df <- map_df(dta, \"ages\") %>% \n    as.data.table() %>%\n    cbind(year = year) %>% \n    melt.data.table(\n      id.vars = \"year\",\n      variable.name = \"age_group\",\n      value.name = \"count\"\n    )\n  pop_df <- map_df(dta, \"populations\") %>% \n    as.data.table() %>%\n    cbind(year = year) %>% \n    melt.data.table(\n      id.vars = \"year\",\n      variable.name = \"age_group\",\n      value.name = \"population\"\n    )\n  asr_df <- map_df(dta, \"age_specific_rate\") %>% \n    modify(as.numeric) %>% \n    as.data.table() %>%\n    cbind(year = as.numeric(year)) %>% \n    melt.data.table(\n      id.vars = \"year\",\n      variable.name = \"age_group\",\n      value.name = \"asr\"\n    )\n  out <- reduce(\n    list(count_df, pop_df, asr_df),\n    merge.data.table,\n    by = c(\"year\", \"age_group\")\n  )\n  age_lbl <- paste(\n    seq(0, 85, 5),\n    seq(0, 85, 5) + 4,\n    sep = \"-\"\n  )\n  age_lbl[length(age_lbl)] <- \"85+\"\n  names(age_lbl) <- 1:18\n  \n  out[, age_group := age_lbl[age_group]]\n  out[, year := as.integer(year)]\n  out[, count := as.integer(count)]\n  out[, population := as.integer(population)]\n  out[, asr := as.numeric(asr)]\n  return(out[])\n}), by = .(sex, type, country)]\n\n\n\n\nClasses 'data.table' and 'data.frame':  14760 obs. of  8 variables:\n $ sex       : chr  \"Male\" \"Male\" \"Male\" \"Male\" ...\n $ type      : chr  \"Incidence\" \"Incidence\" \"Incidence\" \"Incidence\" ...\n $ country   : chr  \"Denmark\" \"Denmark\" \"Denmark\" \"Denmark\" ...\n $ year      : int  1980 1980 1980 1980 1980 1980 1980 1980 1980 1980 ...\n $ age_group : chr  \"0-4\" \"5-9\" \"10-14\" \"15-19\" ...\n $ count     : int  0 1 1 1 2 8 12 16 13 23 ...\n $ population: int  164317 185710 203405 199741 190444 191785 215098 184439 149015 135409 ...\n $ asr       : num  0 0.538 0.492 0.501 1.05 ...\n - attr(*, \".internal.selfref\")=<externalptr>"
  },
  {
    "objectID": "blog/posts/nordic-melanoma/index.html#analysis",
    "href": "blog/posts/nordic-melanoma/index.html#analysis",
    "title": "Melanoma Incidence in Nordic Countries",
    "section": "Analysis",
    "text": "Analysis\nFor the following analysis, crude rates were used in visualization and modelling. Stratified by sex, country and type following plots presents the the crude_rate over the year of diagnosis. Additionally, using count and population, a poisson regression model (Equation 1) was fitted.\n\\[\n\\begin{align}\n\\log\\left(\\frac{\\lambda}{Y}\\right) &= \\beta_0 + \\beta_1 x + \\varepsilon \\\\\n\\text{equivalently, } \\log\\left(\\lambda\\right) &= \\beta_0 + \\beta_1 x + \\log(Y) + \\varepsilon\n\\end{align}\n\\tag{1}\\]\nwhere, \\(\\lambda\\) is the number of events (count), \\(Y\\) is the number of exposed (population) and \\(x\\) is the year of diagnosis.\nAdditionally, using segmented regression the change points in the trend was identified and the annual percentage change (APC) and average annual percentage change (AAPC) in crude rate were calculated. For each strata, following R-code for poisson regression model and segmented regression model were used.\n\n\nData within each strata\nnested_df <- rate_df[, .(\n  data = list(.SD)\n), by = .(sex, type, country)]\nhead(nested_df)\n\n\n    sex      type country               data\n1: Male Incidence Denmark <data.table[41x7]>\n2: Male Incidence Finland <data.table[41x7]>\n3: Male Incidence Iceland <data.table[41x7]>\n4: Male Incidence  Norway <data.table[41x7]>\n5: Male Incidence  Sweden <data.table[41x7]>\n6: Male Mortality Denmark <data.table[41x7]>\n\n\n\n\n\n\n\n\nPoisson regression model\n\n\n\nmodel <- glm(\n  count ~ year + offset(log(population)),\n  data = rate_df,\n  family = poisson(link = \"log\")\n)\n\n\n\n\n\n\n\n\nSegmented regression model\n\n\n\nsgmt_model <- segmented(model, npsi = 2)\n\n\n\n\nPoisson and segmented fit\nfitted_df <- nested_df[, map_df(data, function(dta) {\n  fit <- glm(\n    count ~ year + offset(log(population)),\n    family = poisson(link = \"log\"),\n    data = dta\n  )\n  sgmt_fit <- segmented(fit, npsi = 2)\n\n  data.table(fit = list(fit), sgmt_fit = list(sgmt_fit))\n}), by = .(sex, type, country)]\nhead(fitted_df)\n\n\n    sex      type country       fit        sgmt_fit\n1: Male Incidence Denmark <glm[30]> <segmented[42]>\n2: Male Incidence Finland <glm[30]> <segmented[42]>\n3: Male Incidence Iceland <glm[30]> <segmented[42]>\n4: Male Incidence  Norway <glm[30]> <segmented[42]>\n5: Male Incidence  Sweden <glm[30]> <segmented[42]>\n6: Male Mortality Denmark <glm[30]> <segmented[42]>\n\n\nFollowing plots highlighting Norway and Finland for comparison show a higher melanoma incidence and mortality rate in Norway compared to Finland. A plateau was observed in melanoma incidence in Norway in both male and female.\n\nCrude ratePoisson fitSegmented fitAll countries\n\n\n\n\n\n\n\n\n\n\n\n\nPoisson fitSegmented fit\n\n\n\n\n\n\n\n\n\n\n\n\n\nNorway has higher melanoma incidence and mortality than Finland.\nFinland has lowest melanoma incidence and mortality in both sexes\nNorway has highest melanoma mortality followed by Sweden in both sexes\nDenmark has surpassed both Norway and Sweden in melanoma incidence in the recent years\nA plateau period was observed in melanoma incidence in Norway.\nMost countries has raise in melanoma incidence after 2005.\nA declining melanoma moratlity was observed in all countries in recent years."
  },
  {
    "objectID": "blog/posts/nordic-melanoma/index.html#model",
    "href": "blog/posts/nordic-melanoma/index.html#model",
    "title": "Melanoma Incidence in Nordic Countries",
    "section": "Model",
    "text": "Model\n\nAnnual percentge change (APC)\n\n\n\nAPC within segments\n\n\nCode\na_apc <- readRDS(\"Results/APC.Rds\")\napc <- copy(a_apc[[1]])\naapc <- copy(a_apc[[2]])\napc[, label_period := glue::glue_data(.SD, \"{label}<br>{psi}\")]\napc[, segment := gsub(\"slope\", \"\", segment)]\n\n\n\n\nCode\napc[country %in% c(\"Norway\", \"Denmark\")] %>% \n  dcast.data.table(\n  country + segment ~ type + sex,\n  value.var = \"label_period\"\n) %>% gt::gt(\n  id = \"apc-table\",\n  rowname_col = \"segment\",\n  groupname_col = \"country\"\n) %>% gt::tab_spanner_delim(\"_\") %>% \n  gt::fmt_markdown(everything()) %>% \n  gt::sub_missing(everything(), missing_text = \"-\") %>%\n  gt::tab_stubhead(\"Segment\") %>% \n  gt::tab_options(\n    data_row.padding = \"0px\",\n    table.width = \"100%\",\n    table.font.size = \"small\",\n    column_labels.font.weight = \"bold\",\n    row_group.font.weight = \"bold\"\n  )\n\n\n\n\n\n\n  \n    \n    \n      Segment\n      \n        Incidence\n      \n      \n        Mortality\n      \n    \n    \n      Female\n      Male\n      Female\n      Male\n    \n  \n  \n    \n      Denmark\n    \n    1\n\n2.73 (2.42, 3.04)1980-2002\n\n3.53 (3.22, 3.84)1980-2004\n\n10.46 (-6.14, 29.98)1980-1982\n\n0.62 (0.08, 1.16)1980-2004\n\n    2\n\n6.92 (5.8, 8.04)2002-2011\n\n9.86 (7.38, 12.39)2004-2009\n\n0.65 (0.26, 1.03)1982-2014\n\n4.02 (0.85, 7.29)2004-2012\n\n    3\n\n1.79 (1.18, 2.41)2011-2020\n\n3.12 (2.55, 3.69)2009-2020\n\n-1.98 (-6.26, 2.5)2014-2020\n\n-2.14 (-4.06, -0.17)2012-2020\n\n    \n      Norway\n    \n    1\n\n3.92 (2.9, 4.96)1980-1990\n\n5.49 (4.32, 6.67)1980-1991\n\n1 (0.18, 1.84)1980-2000\n\n17.06 (-0.38, 37.54)1980-1982\n\n    2\n\n-0.1 (-1.26, 1.08)1990-1999\n\n0.45 (-0.44, 1.35)1991-2002\n\n2.7 (1.31, 4.1)2000-2013\n\n1.79 (1.4, 2.19)1982-2011\n\n    3\n\n3.62 (3.35, 3.88)1999-2020\n\n4.39 (4.08, 4.69)2002-2020\n\n-5.01 (-8.14, -1.76)2013-2020\n\n-1.97 (-3.79, -0.12)2011-2020"
  },
  {
    "objectID": "blog/posts/nordic-melanoma/index.html#model-1",
    "href": "blog/posts/nordic-melanoma/index.html#model-1",
    "title": "Melanoma Incidence in Nordic Countries",
    "section": "Model",
    "text": "Model\nIncidence model:\n\n\nCode\nmdl_inc <- glm(\n  data = rate_df,\n  formula = count ~ year + sex + country,\n  offset = log(population),\n  family = poisson(link = \"log\"),\n  subset = type == \"Incidence\"\n)\n\n\nMortality model\n\n\nCode\nmdl_mor <- glm(\n  data = rate_df,\n  formula = count ~ year + sex + country,\n  offset = log(population),\n  family = poisson(link = \"log\"),\n  subset = type == \"Mortality\"\n)\n\n\n\nIncidence model summary\n\n\nCode\nbroom::tidy(mdl_inc, conf.int = TRUE, exponentiate = TRUE) %>% \n  modify_at(c(2:4, 6:7), round, 3)\n\n\n# A tibble: 7 × 7\n  term           estimate std.error statistic   p.value conf.low conf.high\n  <chr>             <dbl>     <dbl>     <dbl>     <dbl>    <dbl>     <dbl>\n1 (Intercept)       0         0.383   -205.   0            0         0    \n2 year              1.04      0        185.   0            1.04      1.04 \n3 sexMale           1.01      0.004      1.90 5.68e-  2    1         1.02 \n4 countryFinland    0.649     0.007    -62.6  0            0.64      0.658\n5 countryIceland    0.494     0.028    -25.6  1.86e-144    0.468     0.521\n6 countryNorway     1.05      0.006      8.09 5.84e- 16    1.04      1.06 \n7 countrySweden     0.936     0.005    -12.1  1.41e- 33    0.926     0.946\n\n\n\n\nMortality model summary\n\n\nCode\nbroom::tidy(mdl_mor, conf.int = TRUE, exponentiate = TRUE) %>% \n  modify_at(c(2:4, 6:7), round, 3)\n\n\n# A tibble: 7 × 7\n  term           estimate std.error statistic   p.value conf.low conf.high\n  <chr>             <dbl>     <dbl>     <dbl>     <dbl>    <dbl>     <dbl>\n1 (Intercept)       0         0.844    -40.9  0            0         0    \n2 year              1.01      0         29.2  1.53e-187    1.01      1.01 \n3 sexMale           1.46      0.01      38.0  0            1.43      1.49 \n4 countryFinland    0.731     0.016    -19.2  1.67e- 82    0.708     0.755\n5 countryIceland    0.611     0.061     -8.02 1.05e- 15    0.54      0.688\n6 countryNorway     1.24      0.015     14.6  3.57e- 48    1.20      1.27 \n7 countrySweden     1.03      0.013      2.2  2.78e-  2    1.00      1.06"
  },
  {
    "objectID": "blog/posts/nordic-melanoma/index.html#summary",
    "href": "blog/posts/nordic-melanoma/index.html#summary",
    "title": "Melanoma Incidence in Nordic Countries",
    "section": "Summary",
    "text": "Summary\n\nMelanoma incidence and moratlity is increasing in all countries\nNorway has highest mortality rate through out the period and has highest increase in both incidence and mortality.\nMelanoma incidence increased rapidly in Denmark between 2002 and 2011 in women and 2004-2009 in men surpassing Norway.\nMortality is decreasing in all countries in recent period."
  },
  {
    "objectID": "blog/posts/nordic-melanoma/index.html#references",
    "href": "blog/posts/nordic-melanoma/index.html#references",
    "title": "Melanoma Incidence in Nordic Countries",
    "section": "References",
    "text": "References\n\n\nEngholm, Gerda, Jacques Ferlay, Niels Christensen, Freddie Bray, Marianne L. Gjerstorff, Åsa Klint, Jóanis E. Køtlum, Elínborg Ólafsdóttir, Eero Pukkala, and Hans H. Storm. 2010. “NORDCAN – a Nordic Tool for Cancer Information, Planning, Quality Control and Research.” Acta Oncologica 49 (5): 725–36. https://doi.org/ch4598.\n\n\nLarønningen, S., J. Ferlay, H. Beydogan, F. Bray, G. Engholm, M. Ervik, J. Gulbrandsen, et al. 2022. “NORDCAN: Cancer Incidence, Mortality, Prevalence and Survival in the Nordic Countries, Version 9.2 (23.06.2022).” 2022. https://nordcan.iarc.fr/.\n\n\nMuggeo, Vito M. R. 2008. “Segmented: An r Package to Fit Regression Models with Broken-Line Relationships.” R News 8 (1): 20–25. https://cran.r-project.org/doc/Rnews/.\n\n\nNorway, Cancer Registry of. 2022. “Cancer in Norway 2021: Cancer Incidence, Mortality, Survival and Prevalence in Norway.” 0806-3621. Cancer Registry of Norway. https://www.kreftregisteret.no/globalassets/cancer-in-norway/2021/cin_report.pdf.\n\n\nR Core Team. 2020. “R: A Language and Environment for Statistical Computing.” Manual. Vienna, Austria. https://www.R-project.org/.\n\n\nWelch, H. Gilbert, Benjamin L. Mazer, and Adewole S. Adamson. 2021. “The Rapid Rise in Cutaneous Melanoma Diagnoses.” New England Journal of Medicine 384 (1): 72–79. https://doi.org/gm6vs4.\n\n\nWhiteman, David C., Adele C. Green, and Catherine M. Olsen. 2016. “The Growing Burden of Invasive Melanoma: Projections of Incidence Rates and Numbers of New Cases in Six Susceptible Populations Through 2031.” The Journal of Investigative Dermatology 136 (6): 1161–71. https://doi.org/f8psv4."
  },
  {
    "objectID": "blog/posts/2017-03-01-generate-latex-or-html-table-with-r/index.html",
    "href": "blog/posts/2017-03-01-generate-latex-or-html-table-with-r/index.html",
    "title": "Create LaTeX, HTML and Markdown tables in R",
    "section": "",
    "text": "R can do data analysis and it can create beautiful reports. You can build all these documents directly in R using rmarkdown which is powered by powerful pandoc. In lots of occasions, user just wants to get some output format of tables that we can use in other platform such as Microsoft word, LaTeX, HTML or Markdown. Here I will discuss about some packages that helps us doing so including xtable, pander, knitr, stargazer and tables. I will use a sample dataset and a summary output from a linear model fit and convert them into various format. Although each of them need their own elaborate discussion, I will just use very basics of them since one can always go and dig into the help file for any details."
  },
  {
    "objectID": "blog/posts/2017-03-01-generate-latex-or-html-table-with-r/index.html#creating-tables",
    "href": "blog/posts/2017-03-01-generate-latex-or-html-table-with-r/index.html#creating-tables",
    "title": "Create LaTeX, HTML and Markdown tables in R",
    "section": "Creating Tables",
    "text": "Creating Tables\n\n\n\n\nxtable\nxtable::print.xtable(\n  xtable::xtable(mtcars), type = 'html'\n)\n\n\n\n\n\n\n\n\n\nmpg\n\n\ncyl\n\n\ndisp\n\n\nhp\n\n\ndrat\n\n\nwt\n\n\nqsec\n\n\nvs\n\n\nam\n\n\ngear\n\n\ncarb\n\n\n\n\nMazda RX4\n\n\n21.00\n\n\n6.00\n\n\n160.00\n\n\n110.00\n\n\n3.90\n\n\n2.62\n\n\n16.46\n\n\n0.00\n\n\n1.00\n\n\n4.00\n\n\n4.00\n\n\n\n\nMazda RX4 Wag\n\n\n21.00\n\n\n6.00\n\n\n160.00\n\n\n110.00\n\n\n3.90\n\n\n2.88\n\n\n17.02\n\n\n0.00\n\n\n1.00\n\n\n4.00\n\n\n4.00\n\n\n\n\nDatsun 710\n\n\n22.80\n\n\n4.00\n\n\n108.00\n\n\n93.00\n\n\n3.85\n\n\n2.32\n\n\n18.61\n\n\n1.00\n\n\n1.00\n\n\n4.00\n\n\n1.00\n\n\n\n\nHornet 4 Drive\n\n\n21.40\n\n\n6.00\n\n\n258.00\n\n\n110.00\n\n\n3.08\n\n\n3.21\n\n\n19.44\n\n\n1.00\n\n\n0.00\n\n\n3.00\n\n\n1.00\n\n\n\n\nHornet Sportabout\n\n\n18.70\n\n\n8.00\n\n\n360.00\n\n\n175.00\n\n\n3.15\n\n\n3.44\n\n\n17.02\n\n\n0.00\n\n\n0.00\n\n\n3.00\n\n\n2.00\n\n\n\n\n\n\npander\n\npander::pander(mtcars)\n\n\nTable continues below\n\n\n\n\n\n\n\n\n\n\n\n\n\n \nmpg\ncyl\ndisp\nhp\ndrat\nwt\nqsec\nvs\n\n\n\n\nMazda RX4\n21\n6\n160\n110\n3.9\n2.62\n16.46\n0\n\n\nMazda RX4 Wag\n21\n6\n160\n110\n3.9\n2.875\n17.02\n0\n\n\nDatsun 710\n22.8\n4\n108\n93\n3.85\n2.32\n18.61\n1\n\n\nHornet 4 Drive\n21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n\n\nHornet Sportabout\n18.7\n8\n360\n175\n3.15\n3.44\n17.02\n0\n\n\n\n\n\n\n\n\n\n\n\n\n \nam\ngear\ncarb\n\n\n\n\nMazda RX4\n1\n4\n4\n\n\nMazda RX4 Wag\n1\n4\n4\n\n\nDatsun 710\n1\n4\n1\n\n\nHornet 4 Drive\n0\n3\n1\n\n\nHornet Sportabout\n0\n3\n2\n\n\n\n\n\n\n\nknitr\n\nknitr::kable(mtcars)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmpg\ncyl\ndisp\nhp\ndrat\nwt\nqsec\nvs\nam\ngear\ncarb\n\n\n\n\nMazda RX4\n21.0\n6\n160\n110\n3.90\n2.620\n16.46\n0\n1\n4\n4\n\n\nMazda RX4 Wag\n21.0\n6\n160\n110\n3.90\n2.875\n17.02\n0\n1\n4\n4\n\n\nDatsun 710\n22.8\n4\n108\n93\n3.85\n2.320\n18.61\n1\n1\n4\n1\n\n\nHornet 4 Drive\n21.4\n6\n258\n110\n3.08\n3.215\n19.44\n1\n0\n3\n1\n\n\nHornet Sportabout\n18.7\n8\n360\n175\n3.15\n3.440\n17.02\n0\n0\n3\n2\n\n\n\n\n\n\n\ntables\n\ntables::as.tabular(mtcars)\n\n\n\n \n \n  \n  mpg\n  cyl\n  disp\n  hp\n  drat\n  wt\n  qsec\n  vs\n  am\n  gear\n  carb\n\n \n \n \n  Mazda RX4\n  21.0\n  6\n  160\n  110\n  3.90\n  2.620\n  16.46\n  0\n  1\n  4\n  4\n\n \n  Mazda RX4 Wag\n  21.0\n  6\n  160\n  110\n  3.90\n  2.875\n  17.02\n  0\n  1\n  4\n  4\n\n \n  Datsun 710\n  22.8\n  4\n  108\n   93\n  3.85\n  2.320\n  18.61\n  1\n  1\n  4\n  1\n\n \n  Hornet 4 Drive\n  21.4\n  6\n  258\n  110\n  3.08\n  3.215\n  19.44\n  1\n  0\n  3\n  1\n\n \n  Hornet Sportabout\n  18.7\n  8\n  360\n  175\n  3.15\n  3.440\n  17.02\n  0\n  0\n  3\n  2"
  },
  {
    "objectID": "blog/posts/2017-03-01-generate-latex-or-html-table-with-r/index.html#exercise",
    "href": "blog/posts/2017-03-01-generate-latex-or-html-table-with-r/index.html#exercise",
    "title": "Create LaTeX, HTML and Markdown tables in R",
    "section": "Exercise",
    "text": "Exercise\n\nUse the mtcars dataset, fit a linear model with mpg as response variable and wt,hp and disp as predictor variable. Generate a LaTeX table and HTML table for the fitted model using xtable."
  },
  {
    "objectID": "blog/posts/2017-03-05-model-assessment-and-variable-selection-prodecure/index.html",
    "href": "blog/posts/2017-03-05-model-assessment-and-variable-selection-prodecure/index.html",
    "title": "Model assessment and variable selection",
    "section": "",
    "text": "Whenever we add a variable in our model, we are not only adding information but also noise that clutter the information and makes the analysis difficult. Simpler model is always better since they contain less noise and they are easy to interpret. In real life, things are not that simple. But relax, there are statistical methods that make model assessment and perform variable selection and gives optimal set of variables for us.\nHere, I will discuss how to compare model to know which one is better than other. This model assessment help us to select a model with few variable that can perform as good as a model with large number of variables. Here comes the idea of variable selection. I will try to explain these concepts with an example. For the example I will use mtcars data set which is available in R by default. Following are two well know procedure of selecting subset of variables,"
  },
  {
    "objectID": "blog/posts/2017-03-05-model-assessment-and-variable-selection-prodecure/index.html#summaries-of-the-models",
    "href": "blog/posts/2017-03-05-model-assessment-and-variable-selection-prodecure/index.html#summaries-of-the-models",
    "title": "Model assessment and variable selection",
    "section": "Summaries of the models",
    "text": "Summaries of the models\n\n3 Variable Model\n\nsummary(model.3)\n\n\nCall:\nlm(formula = mpg ~ wt + qsec + am, data = mtcars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.4811 -1.5555 -0.7257  1.4110  4.6610 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)   9.6178     6.9596   1.382 0.177915    \nwt           -3.9165     0.7112  -5.507 6.95e-06 ***\nqsec          1.2259     0.2887   4.247 0.000216 ***\nam            2.9358     1.4109   2.081 0.046716 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.459 on 28 degrees of freedom\nMultiple R-squared:  0.8497,    Adjusted R-squared:  0.8336 \nF-statistic: 52.75 on 3 and 28 DF,  p-value: 1.21e-11\n\n\n\n\n5 Variable Model\n\nsummary(model.5)\n\n\nCall:\nlm(formula = mpg ~ wt + qsec + am + disp + hp, data = mtcars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.5399 -1.7398 -0.3196  1.1676  4.5534 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)   \n(Intercept) 14.36190    9.74079   1.474  0.15238   \nwt          -4.08433    1.19410  -3.420  0.00208 **\nqsec         1.00690    0.47543   2.118  0.04391 * \nam           3.47045    1.48578   2.336  0.02749 * \ndisp         0.01124    0.01060   1.060  0.29897   \nhp          -0.02117    0.01450  -1.460  0.15639   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.429 on 26 degrees of freedom\nMultiple R-squared:  0.8637,    Adjusted R-squared:  0.8375 \nF-statistic: 32.96 on 5 and 26 DF,  p-value: 1.844e-10\n\n\nFrom these output, it seems that although adjusted \\(R^2\\) has increased in later model, the additional variables are not significant. we can compare these two model with an ANOVA test which compares the residual variance between these two models. We can write the hypothesis as,\n\\(H_0:\\) Model 1 and Model 2 are same vs \\(H_1:\\) Model 1 and Model 2 are different\nwhere, Model 1 and Model 2 represents 3 variable and 5 variable model\n\nanova(model.3, model.5)\n\nAnalysis of Variance Table\n\nModel 1: mpg ~ wt + qsec + am\nModel 2: mpg ~ wt + qsec + am + disp + hp\n  Res.Df    RSS Df Sum of Sq      F Pr(>F)\n1     28 169.29                           \n2     26 153.44  2    15.848 1.3427 0.2786\n\n\nThe ANOVA result can not reject the hypothesis so claim that Model 1 and Model 2 are same. So, it is better to select the simpler model with 3 predictor variables."
  },
  {
    "objectID": "blog/posts/2022-03-18-convert-list-to-array/index.html",
    "href": "blog/posts/2022-03-18-convert-list-to-array/index.html",
    "title": "Convert list of array/matrix into an array in R",
    "section": "",
    "text": "Array and matrix/tables are data structures in R with same data types such as numeric, string or boolean. This examples show how to convert a list of vector/matrix/array into a multi-dimentional array so that it will become easier to aggregate them in particular dimension. We can also do this converting everything into data frame but this way can be useful sometimes and is worth learning.\nLet us use a dataset already available in R and convert that into a list of tables or matrix. Here I will use Titanic dataset and convert it into a nested list of array using purrr package.\n\nlibrary(purrr)\ntitanic_list <- array_tree(Titanic, 4:3)\nstr(titanic_list)\n\nList of 2\n $ No :List of 2\n  ..$ Child: num [1:4, 1:2] 0 0 35 0 0 0 17 0\n  .. ..- attr(*, \"dimnames\")=List of 2\n  .. .. ..$ Class: chr [1:4] \"1st\" \"2nd\" \"3rd\" \"Crew\"\n  .. .. ..$ Sex  : chr [1:2] \"Male\" \"Female\"\n  ..$ Adult: num [1:4, 1:2] 118 154 387 670 4 13 89 3\n  .. ..- attr(*, \"dimnames\")=List of 2\n  .. .. ..$ Class: chr [1:4] \"1st\" \"2nd\" \"3rd\" \"Crew\"\n  .. .. ..$ Sex  : chr [1:2] \"Male\" \"Female\"\n $ Yes:List of 2\n  ..$ Child: num [1:4, 1:2] 5 11 13 0 1 13 14 0\n  .. ..- attr(*, \"dimnames\")=List of 2\n  .. .. ..$ Class: chr [1:4] \"1st\" \"2nd\" \"3rd\" \"Crew\"\n  .. .. ..$ Sex  : chr [1:2] \"Male\" \"Female\"\n  ..$ Adult: num [1:4, 1:2] 57 14 75 192 140 80 76 20\n  .. ..- attr(*, \"dimnames\")=List of 2\n  .. .. ..$ Class: chr [1:4] \"1st\" \"2nd\" \"3rd\" \"Crew\"\n  .. .. ..$ Sex  : chr [1:2] \"Male\" \"Female\"\n\n\nFollowing function will convert this nested array into a multi-dimensional array.\n\nlist2array <- function(list, dnames.name = NULL) {\n  l2a <- function(l) {\n    do.call(abind::abind, append(l, list(rev.along = 0)))\n  }\n  while (is.list(list[[1]])) {\n    list <- map(list, l2a)\n  }\n  out <- l2a(list)\n  if (!is.null(dnames.name)) names(dimnames(out)) <- dnames.name\n  return(out)\n}\n\nNow, testing the function we just created.\n\nNewTitanic <- list2array(titanic_list, dnames.name = names(dimnames(Titanic)))\nstr(NewTitanic)\n\n num [1:4, 1:2, 1:2, 1:2] 0 0 35 0 0 0 17 0 118 154 ...\n - attr(*, \"dimnames\")=List of 4\n  ..$ Class   : chr [1:4] \"1st\" \"2nd\" \"3rd\" \"Crew\"\n  ..$ Sex     : chr [1:2] \"Male\" \"Female\"\n  ..$ Age     : chr [1:2] \"Child\" \"Adult\"\n  ..$ Survived: chr [1:2] \"No\" \"Yes\"\n\n\n\nidentical(Titanic, as.table(NewTitanic))\n\n[1] TRUE"
  },
  {
    "objectID": "blog/posts/age-adjusted-rates/index.html",
    "href": "blog/posts/age-adjusted-rates/index.html",
    "title": "Age Adjusted Rates in Epidemiology",
    "section": "",
    "text": "In general, rates means how fast something is changing usually over time. In epidemiology uses it to describe how quickly a disese occurs in a population. For example, 35 cases of melanoma cases in 100,000 person per year convey a the sense of speed of spread of disease in that population. Incidence rate and mortality rate are two examples that we will discuss further below.\nLet us use melanoma as a outcome in the following discussion. Here, we can calculate a crude incidence rate as,\n\\[\\mathcal{R} = \\frac{\\textsf{no. of melanoma cases}}{\\textsf{no. of person-year}} \\times \\textsf{some multiplier}\\]\nIn the case of mortality rate, we can replace the numerator of above expression by the number of melanoma deaths."
  },
  {
    "objectID": "blog/posts/age-adjusted-rates/index.html#age-specific-rate",
    "href": "blog/posts/age-adjusted-rates/index.html#age-specific-rate",
    "title": "Age Adjusted Rates in Epidemiology",
    "section": "Age-specific rate",
    "text": "Age-specific rate\nWeather to understand a broder prespecitve or to compare across population, these rates are often analyzed stratified by sex and age. This also helps to remove the confounding effection of these factors. The incidence/mortality rate per age-group is usually referred to as Age-specific rates where rates are computed for each age-groups. This is often desirable since factor age has a strong effect on mortality and incidence of most disease especially the cronic one."
  },
  {
    "objectID": "blog/posts/age-adjusted-rates/index.html#age-adjusted-rate",
    "href": "blog/posts/age-adjusted-rates/index.html#age-adjusted-rate",
    "title": "Age Adjusted Rates in Epidemiology",
    "section": "Age-adjusted rate",
    "text": "Age-adjusted rate\nMany research articles, however presents the age-adjusted rates. Age-adjusted rates are standardized (weighted) using some standard population age-structure. For example, many european studies on melanoma uses european standard age distribution. While any reasonal studies have also used world standard population. Cancer registry in their reports sometimes uses age-structure of that country in some given year. For instance, Norway2 and Finland3 have used the their population in 2014 as standard population in their recent cancer report while Australia have used 2001 Australian population4.\nStandardized (adjusted) rates makes comparison between the population possible. Figure @ref(fig:age-std) shows the difference in the age distribution between world population and European population. Following table are some of the standard population often used in the study. Further on standard popuation see seer.cancer.gov5.\n\n\n\n\n\n\nEuropean and World standard population\n \n  \n    Age Group \n    World \n    Europe \n    Nordic \n  \n \n\n  \n    0-4 \n    12000 \n    8000 \n    5900 \n  \n  \n    5-9 \n    10000 \n    7000 \n    6600 \n  \n  \n    10-14 \n    9000 \n    7000 \n    6200 \n  \n  \n    15-19 \n    9000 \n    7000 \n    5800 \n  \n  \n    20-24 \n    8000 \n    7000 \n    6100 \n  \n  \n    25-29 \n    8000 \n    7000 \n    6800 \n  \n  \n    30-34 \n    6000 \n    7000 \n    7300 \n  \n  \n    35-39 \n    6000 \n    7000 \n    7300 \n  \n  \n    40-44 \n    6000 \n    7000 \n    7000 \n  \n  \n    45-49 \n    6000 \n    7000 \n    6900 \n  \n  \n    50-54 \n    5000 \n    7000 \n    7400 \n  \n  \n    55-59 \n    4000 \n    6000 \n    6100 \n  \n  \n    60-64 \n    4000 \n    5000 \n    4800 \n  \n  \n    65-69 \n    3000 \n    4000 \n    4100 \n  \n  \n    70-74 \n    2000 \n    3000 \n    3900 \n  \n  \n    75-79 \n    1000 \n    2000 \n    3500 \n  \n  \n    80-84 \n    500 \n    1000 \n    2400 \n  \n  \n    85+ \n    500 \n    1000 \n    1900 \n  \n\n\n\n\n\n\n\n\n\n\nUS 2000 standard population\n \n  \n    Age Group \n    Std.Population \n  \n \n\n  \n    00 \n    13818 \n  \n  \n    01-04 \n    55317 \n  \n  \n    05-09 \n    72533 \n  \n  \n    10-14 \n    73032 \n  \n  \n    15-19 \n    72169 \n  \n  \n    20-24 \n    66478 \n  \n  \n    25-29 \n    64529 \n  \n  \n    30-34 \n    71044 \n  \n  \n    35-39 \n    80762 \n  \n  \n    40-44 \n    81851 \n  \n  \n    45-49 \n    72118 \n  \n  \n    50-54 \n    62716 \n  \n  \n    55-59 \n    48454 \n  \n  \n    60-64 \n    38793 \n  \n  \n    65-69 \n    34264 \n  \n  \n    70-74 \n    31773 \n  \n  \n    75-79 \n    26999 \n  \n  \n    80-84 \n    17842 \n  \n  \n    85+ \n    15508"
  },
  {
    "objectID": "blog/posts/age-adjusted-rates/index.html#calculating-age-standardized-rate",
    "href": "blog/posts/age-adjusted-rates/index.html#calculating-age-standardized-rate",
    "title": "Age Adjusted Rates in Epidemiology",
    "section": "Calculating age-standardized rate",
    "text": "Calculating age-standardized rate\nThe age-standardized rate (ASR) is calculated as,\n\\[\\text{Age.Std. Rate} = \\frac{\\sum_i\\mathcal{R}_i\\mathcal{w}_i}{\\sum_i\\mathcal{w}_i}\\]\nwhere, \\(\\mathcal{w}_i\\) is the weight corresponding to \\(i^\\text{th}\\) age-group in the reference population.\nLet’s explore further with an example from melanoma cases from Australia."
  },
  {
    "objectID": "blog/posts/age-adjusted-rates/index.html#example",
    "href": "blog/posts/age-adjusted-rates/index.html#example",
    "title": "Age Adjusted Rates in Epidemiology",
    "section": "Example",
    "text": "Example\nThe following example have used the Austrailian cancer data with 5-year age-group6 after filtering melanoma cases from 1982 to 2018. The dataset has yearly count and age-specific incidence rate of melanoma for men and women.\nLet us use the above European standard population to find the yearly age-standardized incidence by sex.\n\ndata <- fread(\"melanoma.csv\")\nstd_pop <- popEpi::stdpop18\n\n\ndata[AgeGroup %in% c(\"85-89\", \"90+\"), AgeGroup := \"85+\"]\nsetnames(std_pop, c(\"AgeGroup\", \"World\", \"Europe\", \"Nordic\"))\nstd_pop[AgeGroup == \"85\", AgeGroup := \"85+\"]\nstd_pop[, c(2:4) := lapply(.SD, prop.table), .SDcols = 2:4]\nasp_data <- merge.data.table(data, std_pop[, .(AgeGroup, World)], by = \"AgeGroup\")\nasp <- asp_data[, .(AgeAdjRate = sum(ASR * World)), by = .(Year, Sex)]\n\n\nasp[, tail(.SD, 8), by = Sex] %>%\n    dcast.data.table(\n        formula = Sex ~ Year,\n        value.var = \"AgeAdjRate\") %>% \n        kableExtra::kbl(caption = paste(\n            \"Age-standardized incidence rate of melanoma\",\n            \"Australia from 2011 to 2018\"\n    )) %>% \n    kableExtra::kable_styling(full_width = FALSE)\n\n\n\nAge-standardized incidence rate of melanoma Australia from 2011 to 2018\n \n  \n    Sex \n    2011 \n    2012 \n    2013 \n    2014 \n    2015 \n    2016 \n    2017 \n    2018 \n  \n \n\n  \n    Females \n    28.915 \n    29.6905 \n    30.3050 \n    30.5225 \n    30.8590 \n    32.161 \n    31.5110 \n    32.404 \n  \n  \n    Males \n    41.433 \n    42.3845 \n    43.1275 \n    42.8415 \n    43.7275 \n    45.309 \n    45.2745 \n    45.040 \n  \n\n\n\n\n\nNow, let us compare the age-specific rates (crude rates) and age-standardized rates with a plot,\n\nCompare the age-specific rates and age-adjusted rates\n\nPlotCode\n\n\n\n\n\n\n\nFigure 1: Age-standardized melanoma rate in Australia\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCompare the age-adjusted rates by sex\n\nPlotCode\n\n\n\n\n\n\n\nFigure 2: Age-standardized melanoma rate in Australia\n\n\n\n\n\n\n\nggplot() +\n    geom_line(\n        data = data, \n        aes(\n            x = Year, \n            y = ASR, \n            group = AgeGroup,\n            color = \"Crude\"\n        )\n    ) +\n    geom_line(\n        data = asp,\n        aes(\n            x = Year, \n            y = AgeAdjRate, \n            group = 1,\n            color = \"Age-adjusted\"\n        )\n    ) +\n    geom_text(\n        data = data[Year == max(Year)],\n        check_overlap = TRUE,\n        size = rel(2),\n        color = \"#0f0f0f\",\n        aes(\n            x = Year + 2,\n            y = ASR,\n            label = AgeGroup\n        )\n    ) +\n    scale_x_continuous(breaks = scales::breaks_extended(8)) +\n    scale_y_continuous(breaks = scales::breaks_extended(8)) +\n    scale_color_manual(NULL, values = c(\"firebrick\", \"grey\")) +\n    facet_grid(cols = vars(Sex)) +\n    theme_minimal() +\n    theme(\n        panel.border = element_rect(fill = NA, color = \"darkgrey\"),\n        legend.position = c(0, 1),\n        legend.justification = c(0, 1)\n    ) +\n    labs(\n        x = \"Diagnosis year\",\n        y = paste(\n            \"Age-adjusted incidence rate\",\n            \"per 100,000 person year\",\n            sep = \"\\n\"\n        )\n    )"
  },
  {
    "objectID": "blog/posts/age-adjusted-rates/index.html#discussion",
    "href": "blog/posts/age-adjusted-rates/index.html#discussion",
    "title": "Age Adjusted Rates in Epidemiology",
    "section": "Discussion",
    "text": "Discussion\nFigure Figure 1 shows that the incidence of melanoma has larger difference in men between the age-groups than in women and men also have a sharp increase in older age group. In addition, the Figure Figure 2 shows that males have higher age-adjusted incidence of melanoma than women in Australia and this trend is increasing over time with rapid increase before 1983 before a drop.\nAge-adjusted rates are useful for comparing rates between population but it cannot give the interpretation required for comparing within a population or over a time period in that population. This is one of the reason, cancer registry uses the internal (population structure of their own population) to compute the age-adjusted rates."
  },
  {
    "objectID": "blog/posts/2017-03-01-using-data-from-different-packages/index.html",
    "href": "blog/posts/2017-03-01-using-data-from-different-packages/index.html",
    "title": "Using Data from different Packages",
    "section": "",
    "text": "Most of the time we need data either for teaching purpose or learning things. Whatever be the reason, data are really important things. R and different packages of R contains different datasets which we can use directly just by installing them. Many books related to R illustrate there examples using these data sources. We can find the dataset from differnt sources as data()\nThe datasets from the package datasets and other loaded packages is shown in default. However, we can obtain the datasets contained in specific packages as,\n\ndata(package='MASS')\n\nThe above will output the dataset contained in the package MASS. These datasets can be saved in a variable and used as different data structure like matrix, data frame or may be list. For example,\n\ndata(Rubber, package='MASS') \nrubber.data <- Rubber\n\n\nExercises\n\nSave the Rabbit dataset from the package MASS into rabbitData and find the mean of BPchange for different Doses applied.\nLoad the data Greene from package car and find which location has the maximum variation in success."
  },
  {
    "objectID": "blog/posts/2017-03-18-interpreting-biplot/index.html",
    "href": "blog/posts/2017-03-18-interpreting-biplot/index.html",
    "title": "Interpreting Biplot",
    "section": "",
    "text": "Obviously, the name suggests itself that there are two aspect of data plotted in latent scale. Biplot in case of principal component analysis (PCA) plot both variable and observation in latent scale (scores and loadings). Throughout this article, I will use USArrests data from datasets package. Lets fit a PCA model using princomp function. However, this can also be done using prcomp. The later one uses singular value decomposition while the former one uses eigenvalue decomposition. Here I have used correlation rather than covariance to compute principal components because there are large values in case of Murder and UrbanPop\n\npc.a <- princomp(USArrests, cor = TRUE)\nplot(pc.a, type = \"lines\", pch = 22, bg = \"grey\",\n     main = \"Variance explained by each componets in PCA\")\ntext(1:4, pc.a$sdev^2, pos = 4,\n     labels = round(cumsum(pls::explvar(pc.a)), 1))\nbox()\n\n\n\n\nVariance of each components and the proportaion of the total variance explained for each additional components is displayed as label\n\n\n\n\nHere, with three components, we have captured 95.7 percent of total variation present in USArrests dataset. Lets get the biplot and try to understand it.\n\nlibrary(ggfortify)\nautoplot(\n  pc.a, label = T, shape = FALSE,\n  loadings = TRUE, loadings.label = TRUE,\n  label.size = 3.5, label.repel = TRUE)"
  },
  {
    "objectID": "blog/posts/2017-03-01-basic-scatter-plot-and-linear-fitted-line/index.html",
    "href": "blog/posts/2017-03-01-basic-scatter-plot-and-linear-fitted-line/index.html",
    "title": "Basic Scatter Plot and linear fitted line",
    "section": "",
    "text": "Lets scatter into some points created by data in xy-space. Data are scattered everywhere but what relation is there between some specific variable with other. Cutting down to simple talking and stick to the heading, we can use mtcars dataset in R.\nThe dataset from Motor Trend US magazine, 1974 comprises fuel consumption and 10 various aspects of automobile design and their performance for 32 automobiles of different models. I will try to obtain the scatter plot for the model and the fitted line for the model.\nIn R, there are three popular packages for obtaining plots Base Graphics, Lattice Plot and ggplot2. Here we will create a scatter plot between two variables mpg (mile per gallon) and disp(displacement) along with the fitted regession line with equation and \\(R²\\) value in it using all there graphics packages.\nLets first fit a linear model,"
  },
  {
    "objectID": "blog/posts/2017-03-01-basic-scatter-plot-and-linear-fitted-line/index.html#plots",
    "href": "blog/posts/2017-03-01-basic-scatter-plot-and-linear-fitted-line/index.html#plots",
    "title": "Basic Scatter Plot and linear fitted line",
    "section": "Plots",
    "text": "Plots\n\nBase Graphics\n\nwith(mtcars, {\n  plot(disp, mpg, pch = 22, bg = \"gray\",\n       xlab = \"Displacement\", ylab = \"Mile per Gallon\",\n       main = \"Displacement vs Mile per Gallon\")\n  abline(mdl, col = \"red\", lty = 2, lwd = 2)\n  text(max(disp), max(mpg), adj = c(1, 1), family = \"monospace\",\n       label = paste(eqn, sumry.lbl, sep = \"\\n\"))\n})\n\n\n\n\n\n\n\n\n\n\nLattice Plot\n\nlibrary(lattice)\nlm.panel <- function(x, y, ...) {\n  panel.xyplot(x, y, pch = 22, fill = \"gray\",\n               cex = 1.2, col = \"black\")\n  panel.text(max(x), max(y), pos = 2,\n             fontfamily = \"monospace\",\n             label = paste(eqn, sumry.lbl, sep = \"\\n\"))\n  panel.abline(mdl, col = \"red\", lty = 2, lwd = 2)\n}\nxyplot(mpg ~ disp, data = mtcars,\n       panel = lm.panel,\n       main = \"Displacement vs Mile per Gallon\",\n       xlab = \"Displacement\", ylab = \"Mile per Gallon\")\n\n\n\n\n\n\n\n\n\n\nggplot\n\nlibrary(ggplot2)\nplt <- qplot(disp, mpg, data = mtcars, geom = c(\"point\"),\n             xlab = \"Displacement\",\n             ylab = \"Mile per Gallon\",\n             main = \"Displacement vs Mile per Gallon\",\n             size = I(3), shape = I(22), fill = I(\"grey\"))\nplt + theme_bw() +\n  geom_smooth(method = \"lm\", color = \"red\", linetype = 2) +\n  annotate(x = Inf, y = Inf, geom = \"text\",\n           hjust = 1.2, vjust = 1.2,\n           family = \"monospace\",\n           label = paste(eqn, sumry.lbl, sep = \"\\n\"))\n\n\n\n\n\n\n\n\nThe fitted regression summary is,\n\n\n\nCall:\nlm(formula = mpg ~ disp, data = mtcars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-4.8922 -2.2022 -0.9631  1.6272  7.2305 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 29.599855   1.229720  24.070  < 2e-16 ***\ndisp        -0.041215   0.004712  -8.747 9.38e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.251 on 30 degrees of freedom\nMultiple R-squared:  0.7183,    Adjusted R-squared:  0.709 \nF-statistic: 76.51 on 1 and 30 DF,  p-value: 9.38e-10\n\n\nThis means, the effect of displacement on mile per gallon of the cars in the model is negative and its magnitude is 0.04. In other words, on one unit change of displacement, the car will travel 0.04 less per gallon."
  },
  {
    "objectID": "blog/posts/2016-01-12-scatter-with-multiple-group/index.html",
    "href": "blog/posts/2016-01-12-scatter-with-multiple-group/index.html",
    "title": "Scatter plot with multiple group",
    "section": "",
    "text": "In many situations, it becomes essential to have a plot with multiple categories. For example, colour the scatter plot according to gender and have two different regression line for each of them.\nLets scatter the some points using data from mtcars, available default in R. Continuing the discussing from this post, where we had plotted mile per gallon (mpg) vs displacement (disp). Here we will create a separate regression line and colour the points accordingly based on number of cylinder (cyl) in the cars. In this article also, I will use there plotting system – base graphics, lattice plot and ggplot2.\nFirst, lets fit our linear model with number of cylinder as a categorical variable.\nLets create a (intercept, slope) pair for each level of cyl and create separate equation for them."
  },
  {
    "objectID": "blog/posts/2016-01-12-scatter-with-multiple-group/index.html#plots",
    "href": "blog/posts/2016-01-12-scatter-with-multiple-group/index.html#plots",
    "title": "Scatter plot with multiple group",
    "section": "Plots",
    "text": "Plots\n\nBase GraphicsLattice Plotggplot2\n\n\n\nwith(mtcars, {\n  car::scatterplot(disp, mpg, groups = cyl, smooth = F,\n                   xlab = \"Displacement\",\n                   ylab = \"Mile per Gallon\",\n                   main = \"Mile per gallon vs displacement\")\n})\nop <- par(family = \"monospace\")\nlegend(\"topright\", text.col = 1:3, col = 1:3, box.lty = 0,\n       lty = 1, lwd = 1, legend = eqn)\nlegend(\"bottomleft\", legend = rsq.info)\n\n\n\n\n\n\n\npar(op)\n\n\n\n\nlibrary(lattice)\nlm.panel <- function(x, y, ...) {\n  panel.xyplot(x, y, ...)\n  panel.abline(eq1, col = 1, lwd = 2, lty = 2)\n  panel.abline(eq2, col = 2, lwd = 2, lty = 2)\n  panel.abline(eq3, col = 3, lwd = 2, lty = 2)\n  panel.text(max(x), max(y), pos = 2,\n             fontfamily = \"monospace\",\n             label = paste(eqn, collapse = \"\\n\"))\n  panel.text(min(x), min(y), pos = 4,\n             fontfamily = \"monospace\",\n             label = paste(rsq.info, collapse = \"\\n\"))\n}\nxyplot(mpg ~ disp, data = mtcars, groups = cyl,\n       auto.key = list(columns = 3, cex = 0.8,\n                       title = \"Cylinder\"),\n       col = 1:3, xlab = \"Displacement\",\n       ylab = \"Mile per gallon\",\n       panel = lm.panel)\n\n\n\n\n\n\n\n\n\n\n\nlibrary(ggplot2)\n## Equation table for displaying them on the plot\neqn.df <- with(mtcars, {\n  data.frame(\n    cyl  = sort(unique(cyl)),\n    mpg  = max(mpg) - c(1:3),\n    disp = max(disp), eqn = eqn\n  )\n})\nggplot(mtcars, aes(disp, mpg, color = cyl)) +\n  geom_point() +\n  theme_bw(base_size = 14) +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  geom_text(data = eqn.df, aes(label = eqn),\n            hjust = 1, family = \"mono\") +\n  annotate(geom = \"text\",\n           x = min(mtcars$disp), y = min(mtcars$mpg),\n           family = \"mono\", hjust = 0,\n           label = paste0(rsq.info, collapse = \"\\n\"))"
  },
  {
    "objectID": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html",
    "href": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html",
    "title": "How ANOVA analyze the variance",
    "section": "",
    "text": "Often we Analysis of Variance (ANOVA) to analyze the variances to find if different cases results in similar outcome and if the difference is significant. Following are some simple examples,\nThese are some common examples where in some cases data are collected by setting up an experiment and in other cases they are collected through sampling. This article tries to explain how the ANOVA analyze the variance and in what situation are they significant throught both simulated and real data.\nConsider the following model with \\(i=3\\) groups and \\(j=n\\) observations,\n\\[y_{ij} = \\mu + \\tau_i + \\varepsilon_{ij}, \\; i = 1, 2, 3\n\\texttt{ and } j = 1, 2, \\ldots n\\]\nhere, \\(\\tau_i\\) is the effect corresponding to group \\(i\\) and \\(\\varepsilon_{ij} \\sim \\mathrm{N}(0, \\sigma^2)\\), the usual assumption of linear model. In order to understand how ANOVA finds the differences between groups and how the group mean and their standard deviation influence the results from ANOVA, let us consider following four cases:"
  },
  {
    "objectID": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html#simulating-data-resembling-these-cases",
    "href": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html#simulating-data-resembling-these-cases",
    "title": "How ANOVA analyze the variance",
    "section": "Simulating data resembling these cases",
    "text": "Simulating data resembling these cases"
  },
  {
    "objectID": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html#fitting-anova-model-for-each-cases",
    "href": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html#fitting-anova-model-for-each-cases",
    "title": "How ANOVA analyze the variance",
    "section": "Fitting ANOVA model for each cases",
    "text": "Fitting ANOVA model for each cases"
  },
  {
    "objectID": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html#prepare-data-for-plotting",
    "href": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html#prepare-data-for-plotting",
    "title": "How ANOVA analyze the variance",
    "section": "Prepare data for plotting",
    "text": "Prepare data for plotting\n\n\n\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\nPicking joint bandwidth of 2.21\n\n\nPicking joint bandwidth of 1.48\n\n\nPicking joint bandwidth of 6.18\n\n\nPicking joint bandwidth of 2.66\n\n\n\n\n\n\n\nPicking joint bandwidth of 2.21\n\n\nPicking joint bandwidth of 1.48\n\n\nPicking joint bandwidth of 6.18\n\n\nPicking joint bandwidth of 2.66\n\n\nPicking joint bandwidth of 3.12\n\n\nPicking joint bandwidth of 3.47\n\n\nPicking joint bandwidth of 6.01\n\n\nPicking joint bandwidth of 6.22"
  },
  {
    "objectID": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html#discussion",
    "href": "blog/posts/2021-03-29-how-anova-analyze-variance/index.html#discussion",
    "title": "How ANOVA analyze the variance",
    "section": "Discussion",
    "text": "Discussion"
  }
]